<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Settings - Django-Rest-Knox</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Settings";
        var mkdocs_page_input_path = "settings.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Django-Rest-Knox
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">API Guide</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../views/">Views</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../urls/">URLs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../auth/">Authentication</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Settings</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#knox_token_model">KNOX_TOKEN_MODEL</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#secure_hash_algorithm">SECURE_HASH_ALGORITHM</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#tests">Tests</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#auth_token_character_length">AUTH_TOKEN_CHARACTER_LENGTH</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#token_ttl">TOKEN_TTL</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#token_limit_per_user">TOKEN_LIMIT_PER_USER</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#user_serializer">USER_SERIALIZER</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#auto_refresh">AUTO_REFRESH</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#auto_refresh_max_ttl">AUTO_REFRESH_MAX_TTL</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#min_refresh_interval">MIN_REFRESH_INTERVAL</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#auth_header_prefix">AUTH_HEADER_PREFIX</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#expiry_datetime_format">EXPIRY_DATETIME_FORMAT</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#token_model">TOKEN_MODEL</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#token_prefix">TOKEN_PREFIX</a>
    </li>
    </ul>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../changelog/">Changelog</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Django-Rest-Knox</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">API Guide</li>
      <li class="breadcrumb-item active">Settings</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/jazzband/django-rest-knox/edit/master/docs/settings.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="settings-knoxsettings">Settings <code>knox.settings</code></h1>
<p>Settings in Knox are handled in a similar way to the rest framework settings.
All settings are namespaced in the <code>'REST_KNOX'</code> setting.</p>
<p>Example <code>settings.py</code></p>
<pre><code class="language-python">#...snip...
# These are the default values if none are set
from datetime import timedelta
from rest_framework.settings import api_settings

KNOX_TOKEN_MODEL = 'knox.AuthToken'

REST_KNOX = {
  'SECURE_HASH_ALGORITHM': 'hashlib.sha512',
  'AUTH_TOKEN_CHARACTER_LENGTH': 64,
  'TOKEN_TTL': timedelta(hours=10),
  'USER_SERIALIZER': 'knox.serializers.UserSerializer',
  'TOKEN_LIMIT_PER_USER': None,
  'AUTO_REFRESH': False,
  'AUTO_REFRESH_MAX_TTL': None,
  'MIN_REFRESH_INTERVAL': 60,
  'AUTH_HEADER_PREFIX': 'Token',
  'EXPIRY_DATETIME_FORMAT': api_settings.DATETIME_FORMAT,
  'TOKEN_MODEL': 'knox.AuthToken',
}
#...snip...
</code></pre>
<h2 id="knox_token_model">KNOX_TOKEN_MODEL</h2>
<p>This is the variable used in the swappable dependency of the <code>AuthToken</code> model</p>
<h2 id="secure_hash_algorithm">SECURE_HASH_ALGORITHM</h2>
<p>This is a reference to the class used to provide the hashing algorithm for
token storage.</p>
<p><em>Do not change this unless you know what you are doing</em></p>
<p>By default, Knox uses SHA-512 to hash tokens in the database.</p>
<p><code>hashlib.sha3_512</code> is an acceptable alternative setting for production use.</p>
<h3 id="tests">Tests</h3>
<p>SHA-512 and SHA3-512 are secure, however, they are slow. This should not be a
problem for your users, but when testing it may be noticeable (as test cases tend
to use many more requests much more quickly than real users). In testing scenarios
it is acceptable to use <code>MD5</code> hashing (<code>hashlib.md5</code>).</p>
<p>MD5 is <strong>not secure</strong> and must <em>never</em> be used in production sites.</p>
<h2 id="auth_token_character_length">AUTH_TOKEN_CHARACTER_LENGTH</h2>
<p>This is the length of the token that will be sent to the client. By default it
is set to 64 characters (this shouldn't need changing).</p>
<h2 id="token_ttl">TOKEN_TTL</h2>
<p>This is how long a token can exist before it expires. Expired tokens are automatically
removed from the system.</p>
<p>The setting should be set to an instance of <code>datetime.timedelta</code>. The default is
10 hours ()<code>timedelta(hours=10)</code>).</p>
<p>Setting the TOKEN_TTL to <code>None</code> will create tokens that never expire.</p>
<p>Warning: setting a 0 or negative timedelta will create tokens that instantly expire,
the system will not prevent you setting this.</p>
<h2 id="token_limit_per_user">TOKEN_LIMIT_PER_USER</h2>
<p>This allows you to control how many valid tokens can be issued per user.
If the limit for valid tokens is reached, an error is returned at login.
By default this option is disabled and set to <code>None</code> -- thus no limit.</p>
<h2 id="user_serializer">USER_SERIALIZER</h2>
<p>This is the reference to the class used to serialize the <code>User</code> objects when
successfully returning from <code>LoginView</code>. The default is <code>knox.serializers.UserSerializer</code></p>
<h2 id="auto_refresh">AUTO_REFRESH</h2>
<p>This defines if the token expiry time is extended by TOKEN_TTL each time the token
is used.</p>
<h2 id="auto_refresh_max_ttl">AUTO_REFRESH_MAX_TTL</h2>
<p>When automatically extending token expiry time, limit the total token lifetime. If
AUTO_REFRESH_MAX_TTL is set, then the token lifetime since the original creation date cannot
exceed AUTO_REFRESH_MAX_TTL.</p>
<h2 id="min_refresh_interval">MIN_REFRESH_INTERVAL</h2>
<p>This is the minimum time in seconds that needs to pass for the token expiry to be updated
in the database.</p>
<h2 id="auth_header_prefix">AUTH_HEADER_PREFIX</h2>
<p>This is the Authorization header value prefix. The default is <code>Token</code></p>
<h2 id="expiry_datetime_format">EXPIRY_DATETIME_FORMAT</h2>
<p>This is the expiry datetime format returned in the login view. The default is the
<a href="https://www.django-rest-framework.org/api-guide/settings/#date-and-time-formatting">DATETIME_FORMAT</a> of Django REST framework. May be any of <code>None</code>, <code>iso-8601</code>
or a Python <a href="https://docs.python.org/3/library/time.html#time.strftime">strftime format</a> string.</p>
<h2 id="token_model">TOKEN_MODEL</h2>
<p>This is the reference to the model used as <code>AuthToken</code>. We can define a custom <code>AuthToken</code>
model in our project that extends <code>knox.AbstractAuthToken</code> and add our business logic to it.
The default is <code>knox.AuthToken</code></p>
<h2 id="token_prefix">TOKEN_PREFIX</h2>
<p>This is the prefix for the generated token that is used in the Authorization header. The default is just an empty string.
It can be up to <code>CONSTANTS.MAXIMUM_TOKEN_PREFIX_LENGTH</code> long.</p>
<h1 id="constants-knoxsettings">Constants <code>knox.settings</code></h1>
<p>Knox also provides some constants for information. These must not be changed in
external code; they are used in the model definitions in knox and an error will
be raised if there is an attempt to change them.</p>
<pre><code class="language-python">from knox.settings import CONSTANTS

print(CONSTANTS.DIGEST_LENGTH) #=&gt; 128
</code></pre>
<h2 id="digest_length">DIGEST_LENGTH</h2>
<p>This is the length of the digest that will be stored in the database for each token.</p>
<h2 id="maximum_token_prefix_length">MAXIMUM_TOKEN_PREFIX_LENGTH</h2>
<p>This is the maximum length of the token prefix.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../auth/" class="btn btn-neutral float-left" title="Authentication"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../changelog/" class="btn btn-neutral float-right" title="Changelog">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/jazzband/django-rest-knox" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../auth/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../changelog/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
